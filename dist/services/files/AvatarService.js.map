{"version":3,"sources":["../../../src/services/files/AvatarService.js"],"names":["AvatarService","constructor","S3Service","S3","addAvatarToS3","image","id","filePath","path","resolve","__dirname","name","s3Path","uploadFile","type","deleteTemporaryAvatarFile","deleteFileAsync","util","promisify","fs","unlink","pathFile"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;;;AAEe,MAAMA,aAAN,CAAoB;;AAE/BC,gBAAY,EAAEC,SAAF,EAAZ,EAA2B;AACvB,aAAKC,EAAL,GAAUD,SAAV;AACH;;AAED;;;;;;AAMA,UAAME,aAAN,CAAoBC,KAApB,EAA2BC,EAA3B,EAA+B;AAC3B,cAAMC,WAAWC,eAAKC,OAAL,CAAaC,YAAY,gBAAzB,EAA4C,GAAEL,MAAMM,IAAK,EAAzD,CAAjB;AACA,cAAMC,SAAU,eAAcN,EAAG,IAAGD,MAAMM,IAAK,EAA/C;AACA,eAAO,KAAKR,EAAL,CAAQU,UAAR,CAAmBN,QAAnB,EAA6BF,MAAMS,IAAnC,EAAyCF,MAAzC,CAAP;AACH;;AAED;;;;;AAKA,UAAMG,yBAAN,CAAgCV,KAAhC,EAAuC;AACnC,cAAMW,kBAAkBC,eAAKC,SAAL,CAAeC,aAAGC,MAAlB,CAAxB;AACA,cAAMC,WAAWb,eAAKC,OAAL,CAAaC,YAAY,gBAAzB,EAA4C,GAAEL,MAAMM,IAAK,EAAzD,CAAjB;AACA,eAAOK,gBAAgBK,QAAhB,CAAP;AACH;;AA3B8B;kBAAdrB,a","file":"AvatarService.js","sourcesContent":["import fs from 'fs';\nimport path from 'path';\nimport util from 'util';\n\nexport default class AvatarService {\n\n    constructor({ S3Service }) {\n        this.S3 = S3Service;\n    }\n\n    /**\n     * Add avatars to S3\n     * @param image\n     * @param id\n     * @returns {Promise.<void>}\n     */\n    async addAvatarToS3(image, id) {\n        const filePath = path.resolve(__dirname + '/../../../temp', `${image.name}`);\n        const s3Path = `images/user_${id}/${image.name}`;\n        return this.S3.uploadFile(filePath, image.type, s3Path);\n    }\n\n    /**\n     * Delete temporary avatar files\n     * @param image\n     * @returns {Promise.<void>}\n     */\n    async deleteTemporaryAvatarFile(image) {\n        const deleteFileAsync = util.promisify(fs.unlink);\n        const pathFile = path.resolve(__dirname + '/../../../temp', `${image.name}`);\n        return deleteFileAsync(pathFile);\n    }\n\n}\n"]}