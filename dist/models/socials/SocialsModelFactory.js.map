{"version":3,"sources":["../../../src/models/socials/SocialsModelFactory.js"],"names":["SocialsModelFactory","define","sequelize","Social","ModelDefinitionBuilder","properties","userId","type","Sequelize","INTEGER","allowNull","TINYINT","socialUserId","STRING","Object","assign","options","scopes","byType","where","bySocialUserId","withUser","include","model","as","associate","belongsTo","foreignKey"],"mappings":";;;;;;;AAAA;;AAEA;;;;;;;;;;AAUA;;;;AAIA;;;;AAIO,MAAMA,mBAAN,CAA0B;AAC7B;;;;AAIA,WAAOC,MAAP,CAAcC,SAAd,EAAyB;AACrB;;;AAGA,cAAMC,SAASD,UAAUD,MAAV,CACX,QADW,EAEXG,+CAAuBC,UAAvB,CAAkC;;AAE9BC,oBAAQ;AACJC,sBAAML,UAAUM,SAAV,CAAoBC,OADtB;AAEJC,2BAAW;AAFP,aAFsB;AAM9BH,kBAAM;AACFA,sBAAML,UAAUM,SAAV,CAAoBG,OADxB;AAEFD,2BAAW;AAFT,aANwB;AAU9BE,0BAAc;AACVL,sBAAML,UAAUM,SAAV,CAAoBK,MAApB,CAA2B,GAA3B,CADI;AAEVH,2BAAW;AAFD;AAVgB,SAAlC,CAFW,EAiBXI,OAAOC,MAAP,CAAcX,+CAAuBY,OAAvB,CAA+B,SAA/B,CAAd,EAAyD;AACrDC,oBAAQH,OAAOC,MAAP,CAAcX,+CAAuBa,MAAvB,EAAd,EAA+C;AACnDC,wBAASX,IAAD,KAAW;AACfY,2BAAO;AACHZ;AADG;AADQ,iBAAX,CAD2C;AAMnDa,gCAAiBR,YAAD,KAAmB;AAC/BO,2BAAO;AACHP;AADG;AADwB,iBAAnB,CANmC;AAWnDS,0BAAU,OAAO;AACbC,6BAAS,CACL;AACIC,+BAAOrB,UAAUqB,KAAV,CAAgB,MAAhB,CADX;AAEIC,4BAAI;AAFR,qBADK;AADI,iBAAP;AAXyC,aAA/C;AAD6C,SAAzD,CAjBW,CAAf;;AAyCArB,eAAOsB,SAAP,GAAmB,YAAW;AAC1B,iBAAKC,SAAL,CACIxB,UAAUqB,KAAV,CAAgB,MAAhB,CADJ,EAEI;AACII,4BAAY,QADhB;AAEIH,oBAAI;AAFR,aAFJ;AAOH,SARD;;AAUA,eAAOrB,MAAP;AACH;AA7D4B;QAApBH,mB,GAAAA,mB","file":"SocialsModelFactory.js","sourcesContent":["import { ModelDefinitionBuilder } from '../../base/ModelDefinitionBuilder';\n\n/**\n * @typedef {Object} SocialsInstanceAttributes\n * @property {number} id\n * @property {number} userId\n * @property {number} type\n * @property {string} socialUserId\n * @property {number} createdAt\n * @property {number} updatedAt\n */\n\n/**\n * @typedef {sequelize.Instance<SocialsInstanceAttributes>} SocialsInstance\n */\n\n/**\n * @typedef {sequelize.Model<SocialsInstance, SocialsInstanceAttributes>} SocialsModel\n */\n\nexport class SocialsModelFactory {\n    /**\n     * @param {sequelize.Sequelize} sequelize\n     * @return {SocialsModel}\n     */\n    static define(sequelize) {\n        /**\n         * @type {SocialsModel}\n         */\n        const Social = sequelize.define(\n            'Social',\n            ModelDefinitionBuilder.properties({\n\n                userId: {\n                    type: sequelize.Sequelize.INTEGER,\n                    allowNull: false,\n                },\n                type: {\n                    type: sequelize.Sequelize.TINYINT,\n                    allowNull: false,\n                },\n                socialUserId: {\n                    type: sequelize.Sequelize.STRING(255),\n                    allowNull: false,\n                },\n            }),\n            Object.assign(ModelDefinitionBuilder.options('socials'), {\n                scopes: Object.assign(ModelDefinitionBuilder.scopes(), {\n                    byType: (type) => ({\n                        where: {\n                            type\n                        }\n                    }),\n                    bySocialUserId: (socialUserId) => ({\n                        where: {\n                            socialUserId\n                        }\n                    }),\n                    withUser: () => ({\n                        include: [\n                            {\n                                model: sequelize.model('User'),\n                                as: 'user'\n                            }\n                        ]\n                    }),\n                })\n            })\n        );\n\n        Social.associate = function() {\n            this.belongsTo(\n                sequelize.model('User'),\n                {\n                    foreignKey: 'userId',\n                    as: 'user'\n                }\n            );\n        };\n\n        return Social;\n    }\n}\n"]}